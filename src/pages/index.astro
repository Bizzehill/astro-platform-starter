---
import Layout from '../layouts/Layout.astro';
import LinkGrid from '../components/LinkGrid';

// Authentication check
const cookies = Astro.request.headers.get('cookie') || '';
const isAuthenticated = cookies.includes('authenticated=true');
const emailCookie = cookies.split(';').find(c => c.trim().startsWith('userEmail='));
const email = emailCookie ? decodeURIComponent(emailCookie.split('=')[1].trim()) : '';

// Redirect if not authenticated
if (!isAuthenticated || !email.endsWith('@steemer.com')) {
  return Astro.redirect('/login');
}
---

<Layout title="Stanley Steemer Location Maps">
  <main class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold text-center mb-8">Location Territory-Zone Maps</h1>
    <LinkGrid client:load />
  </main>
</Layout>
